<!DOCTYPE html>
<html style="height: 100%">
    <head>
        <script src="google-block/blockly_compressed.js"></script>
        <script src="google-block/blocks_compressed.js"></script>
        <script src="google-block/msg/js/en.js"></script>
        <script src="custom_blocks.js"></script>
    </head>
    <body style="height: 100%">
        <div id="blocklyArea" style="height: 100%; width: 100%;">
            <div id="blocklyDiv" style="position: absolute">
            </div>
        </div>
        <xml id="toolbox" style="display: none">
            <block type="experiment_design"></block>
            <block type="dependent_variable"></block>
            <block type="independent_variable"></block>
            <block type="variable"></block>
          </xml>
          <script>
              var blocklyArea = document.getElementById('blocklyArea');
              var blocklyDiv = document.getElementById('blocklyDiv');
              var workspace = Blockly.inject('blocklyDiv', {toolbox: document.getElementById('toolbox')});
              var onresize = function(e) {
                  var element = blocklyArea;
                  var x = 0;
                  var y = 0;
                  do {
                      x += element.offsetLeft;
                      y += element.offsetTop;
                      element = element.offsetParent;
                  } while(element);
                  blocklyDiv.style.left = x + 'px';
                blocklyDiv.style.top = y + 'px';
                blocklyDiv.style.width = blocklyArea.offsetWidth + 'px';
                blocklyDiv.style.height = blocklyArea.offsetHeight + 'px';
                Blockly.svgResize(workspace);
              }
              window.addEventListener('resize', onresize, false);
              onresize();
              Blockly.svgResize(workspace);
          </script>
    </body>
</html>